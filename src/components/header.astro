---
const mainNav = [
  { name: "Domov", url: "/" },
  { name: "Po≈æiƒçov≈àa n√°radia", url: "/pozicovna-naradia", hasDropdown: true },
  { name: "Zemn√© a b√∫racie pr√°ce", url: "/zemne-buracie-prace" },
  { name: "Kontakt", url: "/kontakt" }
];
---

<header id="mainHeader">
  <div class="header-container">
    <div class="header-content">
      <!-- LOGO -->
      <a href="/" class="logo-link">
        <div class="logo-wrapper">
          <img src="/logo.png" alt="ROYAL STROJE" class="logo-img"
               onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
          <div class="logo-fallback" style="display:none;">
            <span class="logo-text">ROYAL STROJE</span>
          </div>
        </div>
      </a>

      <!-- DESKTOP NAV -->
      <nav class="desktop-nav">
        {mainNav.map((item) => (
          <a href={item.url} class="nav-link">{item.name}</a>
        ))}
      </nav>

      <!-- DESKTOP PHONE -->
      <a href="tel:+421948555551" class="desktop-phone">üìû 0948 555 551</a>

      <!-- MOBILE TOGGLE -->
      <button class="mobile-toggle" data-menu-toggle aria-label="Menu" aria-expanded="false">
        <span class="hamburger"></span>
        <span class="hamburger"></span>
        <span class="hamburger"></span>
      </button>
    </div>
  </div>

  <!-- MOBILE MENU -->
  <div class="mobile-menu" data-mobile-menu aria-hidden="true">
    <nav class="mobile-nav">
      {mainNav.map((item) => (
        <a href={item.url} class="mobile-link">{item.name}</a>
      ))}
      <a href="tel:+421948555551" class="mobile-phone">üìû 0948 555 551</a>
    </nav>
  </div>
</header>

<div class="header-spacer"></div>

<style>
  #mainHeader{position:fixed;top:0;left:0;right:0;z-index:99999;background:rgba(9,9,11,.95);backdrop-filter:blur(20px);
    border-bottom:1px solid rgba(249,115,22,.2);box-shadow:0 4px 20px rgba(0,0,0,.5)}
  .header-container{max-width:1600px;margin:0 auto;padding:0 1rem}
  .header-content{display:flex;align-items:center;justify-content:space-between;height:64px}
  .logo-link{display:flex;align-items:center;text-decoration:none;z-index:10}
  .logo-wrapper{position:relative;width:120px;height:48px}
  .logo-img{width:100%;height:100%;object-fit:contain;filter:brightness(1.1)}
  .logo-fallback{display:flex;align-items:center;justify-content:center;width:100%;height:100%;
    background:linear-gradient(135deg,#f97316,#ea580c);border-radius:12px}
  .logo-text{font-size:14px;font-weight:900;color:#000;text-transform:uppercase;letter-spacing:1px}

  .desktop-nav{display:none;gap:.5rem}
  .nav-link{padding:.75rem 1.5rem;color:#d4d4d8;text-decoration:none;font-weight:600;font-size:14px;border-radius:12px;transition:.3s}
  .nav-link:hover{color:#fff;background:rgba(249,115,22,.1)}
  .desktop-phone{display:none;padding:.75rem 1.5rem;background:linear-gradient(135deg,#f97316,#ea580c);
    color:#000;text-decoration:none;font-weight:800;font-size:14px;border-radius:50px;transition:.3s}
  .desktop-phone:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(249,115,22,.4)}

  .mobile-toggle{display:flex;flex-direction:column;gap:4px;width:40px;height:40px;align-items:center;justify-content:center;
    background:none;border:none;border-radius:8px;cursor:pointer;padding:8px;transition:.3s;z-index:10}
  .mobile-toggle:hover{background:rgba(249,115,22,.1)}
  .hamburger{display:block;width:24px;height:2px;background:#fff;border-radius:2px;transition:.3s}
  .mobile-toggle.active .hamburger:nth-child(1){transform:rotate(45deg) translateY(8px)}
  .mobile-toggle.active .hamburger:nth-child(2){opacity:0}
  .mobile-toggle.active .hamburger:nth-child(3){transform:rotate(-45deg) translateY(-8px)}

  .mobile-menu{position:fixed;top:64px;left:0;right:0;bottom:0;background:rgba(9,9,11,.98);backdrop-filter:blur(30px);
    transform:translateY(-100%);opacity:0;transition:.4s;overflow-y:auto;z-index:99998;pointer-events:none}
  .mobile-menu.active{transform:translateY(0);opacity:1;pointer-events:auto}
  .mobile-nav{padding:2rem 1rem;display:flex;flex-direction:column;gap:1rem}
  .mobile-link{display:block;padding:1.25rem 1.5rem;color:#fff;text-decoration:none;font-weight:700;font-size:18px;
    background:rgba(249,115,22,.1);border:1px solid rgba(249,115,22,.3);border-radius:16px;transition:.3s}
  .mobile-link:hover{background:rgba(249,115,22,.2);border-color:#f97316}
  .mobile-phone{display:block;margin-top:1rem;padding:1.25rem 2rem;background:linear-gradient(135deg,#f97316,#ea580c);
    color:#000;text-decoration:none;font-weight:900;font-size:20px;text-align:center;border-radius:16px;
    box-shadow:0 10px 40px rgba(249,115,22,.3)}

  .header-spacer{height:64px}

  @media (min-width:1024px){
    .header-content{height:80px}
    .logo-wrapper{width:160px;height:64px}
    .desktop-nav{display:flex}
    .desktop-phone{display:block}
    .mobile-toggle{display:none}
    .header-spacer{height:80px}
  }
  @media (min-width:768px){.logo-wrapper{width:140px;height:56px}}
  @supports (height: 100dvh){.mobile-menu{min-height:calc(100dvh - 64px)}}
</style>

<script is:global>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.querySelector('[data-menu-toggle]');
    const menu   = document.querySelector('[data-mobile-menu]');
    if (!toggle || !menu) return;

    const openMenu = () => {
      toggle.classList.add('active');
      toggle.setAttribute('aria-expanded', 'true');
      menu.classList.add('active');
      menu.setAttribute('aria-hidden', 'false');
      document.documentElement.style.overflow = 'hidden';
    };

    const closeMenu = () => {
      toggle.classList.remove('active');
      toggle.setAttribute('aria-expanded', 'false');
      menu.classList.remove('active');
      menu.setAttribute('aria-hidden', 'true');
      document.documentElement.style.overflow = '';
    };

    toggle.addEventListener('click', () => {
      menu.classList.contains('active') ? closeMenu() : openMenu();
    });

    // zavri po kliknut√≠ na odkaz
    menu.querySelectorAll('a').forEach(a => a.addEventListener('click', closeMenu));

    // zavri ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menu.classList.contains('active')) closeMenu();
    });
  });
</script>
